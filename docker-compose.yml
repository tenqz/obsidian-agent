services:
  mcp:
    build:
      context: .
    env_file:
      - .env
    environment:
      APP_ENV: "local"
      VAULT_PATH: "/vault"
      MCP_TRANSPORT: "${MCP_TRANSPORT:-sse}"
      MCP_HOST: "0.0.0.0"
      MCP_PORT: "8001"
      MCP_OAUTH_ENABLED: "${MCP_OAUTH_ENABLED:-false}"
      MCP_OAUTH_ISSUER: "${MCP_OAUTH_ISSUER:-http://localhost:8001}"
    volumes:
      - "${OBSIDIAN_VAULT_PATH:-./vault}:/vault"
    ports:
      - "${MCP_PORT:-8001}:8001"
    command: ["python", "-m", "app.mcp.server"]
    restart: unless-stopped
    networks:
      - obsidian-network

networks:
  obsidian-network:
    driver: bridge
